<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP -->
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self'"
    />
    <meta
      http-equiv="X-Content-Security-Policy"
      content="default-src 'self'; script-src 'self'"
    />
    <title>金价悬浮窗</title>
    <style>
      /* 基础布局与行为 */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        -webkit-tap-highlight-color: transparent;
        -webkit-touch-callout: none;
      }

      html, body {
        height: 100%;
        overflow: hidden; /* 禁止滚动，防止出现滚动条 */
      }

      body {
        font-family: 'Microsoft YaHei', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: rgba(12, 14, 16, 0.70);
        color: #fff;
        border-radius: 8px;
        box-shadow: none;
        font-size: 12px;
        cursor: default;
      }

      /* 将顶部 header 与主容器设为可拖动区域，保留 .no-drag 给交互元素 */
      .header, .container {
        -webkit-app-region: drag; 
        display: flex;
        justify-content: space-between;
        align-items: center;
        height: 28px;
        padding: 4px 8px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.08);
      }


      /* 强制禁用选择，防止拖动时选中文字 */
      .container, .container * {
        -webkit-user-select: none !important;
        -moz-user-select: none !important;
        -ms-user-select: none !important;
        user-select: none !important;
        -webkit-user-drag: none !important;
      }

      /* 可交互元素禁止拖拽 */
      .no-drag, a, button, input, textarea, [contenteditable] {
        -webkit-app-region: no-drag;
      }

      .container {
        width: 100%;
        padding: 6px 8px;
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
      }

      /* 内容区域：限制高度并隐藏内部滚动条，确保小窗口不出现滚动 */
      #gold-data-container {
        overflow: hidden;
        flex: 1 1 auto;
        min-height: 0; /* 允许子元素收缩以适配父容器 */
      }

      .title {
        font-size: 12px;
        font-weight: 600;
        color: #FFD700;
        flex-grow: 1;
        -webkit-user-select: none;
        display: flex;
        align-items: center;
        gap: 6px;
      }


      .gold-left { display:flex; align-items:center; gap:6px; color:#ddd; }

      .gold-item {
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
        margin: 1px 0;
        padding: 0;
        font-size: 12px;
        line-height: 18px;
        height: 18px;
        gap: 8px;
        white-space: nowrap;
        overflow: hidden;
        -webkit-user-select: none;
      }

      .gold-name { color: #ddd; max-width: 90px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; display:inline-block; font-size:12px; }
      .gold-price { font-weight: 700; color: #FFD700; min-width: 48px; text-align: right; font-size:12px; }

      /* 使常规显示项也成为拖动区域（但交互元素仍需 .no-drag） */
      .gold-item, .gold-name, .gold-price, .title {
        -webkit-app-region: drag;
      }

      .update-time {
        display:flex;
        align-items:center;
        gap:8px;
        justify-content:center;
        font-size:11px;
        color: #bdbdbd;
        margin-top: 8px;
        padding-top: 6px;
        border-top: 1px solid rgba(255, 255, 255, 0.04);
      }

      .loading { text-align: center; padding: 12px 0; color: #FFD700; font-size: 12px; display:flex; align-items:center; justify-content:center; gap:8px; }

      /* 在非常小的窗口中隐藏滚动条（webkit） */
      ::-webkit-scrollbar { width: 0; height: 0; }
    </style>
  </head>
  <body>
    <div class="container">
      <div id="gold-data-container">
        <div class="loading"><span>获取中...</span></div>
      </div>
      
      <div id="update-time" class="update-time no-drag"><span></span></div>
    </div>
    
    <script src="./renderer.js"></script>
  </body>
</html>